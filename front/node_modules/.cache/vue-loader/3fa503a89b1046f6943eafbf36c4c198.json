{"remainingRequest":"/tmp/g2-eq1_dev/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/tmp/g2-eq1_dev/front/src/components/issues/DifficultyManagement.vue?vue&type=script&lang=js&","dependencies":[{"path":"/tmp/g2-eq1_dev/front/src/components/issues/DifficultyManagement.vue","mtime":1605890499732},{"path":"/tmp/g2-eq1_dev/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/tmp/g2-eq1_dev/front/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/tmp/g2-eq1_dev/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/tmp/g2-eq1_dev/front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBkcmFnZ2FibGUgZnJvbSAidnVlZHJhZ2dhYmxlIjsKaW1wb3J0IGlzc3VlU3VtbWFyeSBmcm9tICIuL3N1YkNvbXBvbmVudHMvSXNzdWVTdW1tYXJ5IjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiRGlmZmljdWx0eU1hbmFnZW1lbnQiLAogIG9yZGVyOiAxLAogIGNvbXBvbmVudHM6IHsKICAgIGRyYWdnYWJsZSwKICAgIGlzc3VlU3VtbWFyeSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1bmFzc2lnbmVkSXNzdWVzOiBbXSwKICAgICAgZGlmZmljdWx0eUxpc3Q6IFsKICAgICAgICB7CiAgICAgICAgICBkaWZmaWN1bHR5OiAxLAogICAgICAgICAgaXNzdWVzOiBbXSwKICAgICAgICB9LAogICAgICBdLAogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmF4aW9zLmdldCh0aGlzLiRwcm94eSArICIvaXNzdWVzIikudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgbGV0IGlzc3VlcyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgIHRoaXMuc29ydElzc3Vlcyhpc3N1ZXMpOwogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBsb2c6IGZ1bmN0aW9uIChldnQpIHsKICAgICAgd2luZG93LmNvbnNvbGUubG9nKGV2dCk7CiAgICB9LAogICAgYWRkRGlmZmljdWx0eTogZnVuY3Rpb24gKCkgewogICAgICB0aGlzLmRpZmZpY3VsdHlMaXN0LnB1c2goewogICAgICAgIGRpZmZpY3VsdHk6IGZpYm9uYWNjaSh0aGlzLmRpZmZpY3VsdHlMaXN0Lmxlbmd0aCArIDEpLAogICAgICAgIGlzc3VlczogW10sCiAgICAgIH0pOwogICAgfSwKICAgIGFwcGx5Q2hhbmdlczogZnVuY3Rpb24gKCkgewogICAgICAvL0Vudm95ZXIgYXUgc2VydmV1ciAgZCdpc3N1ZXMgIGxhIGxpc3RlLgogICAgICB0aGlzLmF4aW9zCiAgICAgICAgLnB1dCh0aGlzLiRwcm94eSArICIvaXNzdWVzL21hbmFnZURpZmZpY3VsdHkiLCB7CiAgICAgICAgICBkaWZmaWN1bHR5TGlzdDogdGhpcy5kaWZmaWN1bHR5TGlzdCwKICAgICAgICB9KQogICAgICAgIC50aGVuKCgpID0+IHt9KTsKICAgIH0sCiAgICBzb3J0SXNzdWVzOiBmdW5jdGlvbiAoaXNzdWVzKSB7CiAgICAgIGZvciAobGV0IGlzc3VlIG9mIGlzc3VlcykgewogICAgICAgIC8vd2luZG93LmNvbnNvbGUubG9nKGlzc3VlKTsKICAgICAgICBpZiAoCiAgICAgICAgICBpc3N1ZS5kaWZmaWN1bHR5ID09IHVuZGVmaW5lZCB8fAogICAgICAgICAgaXNzdWUuZGlmZmljdWx0eSA9PSBudWxsIHx8CiAgICAgICAgICBpc3N1ZS5kaWZmaWN1bHR5ID09IDAKICAgICAgICApIHsKICAgICAgICAgIHRoaXMudW5hc3NpZ25lZElzc3Vlcy5wdXNoKGlzc3VlKTsKICAgICAgICB9IAogICAgICAgIGVsc2UgewogICAgICAgICAgbGV0IGRpZmZpY3VsdHkgPSB0aGlzLmRpZmZpY3VsdHlMaXN0LmZpbmQoCiAgICAgICAgICAgIChlbGVtZW50KSA9PiBlbGVtZW50LmRpZmZpY3VsdHkgPT09IGlzc3VlLmRpZmZpY3VsdHkKICAgICAgICAgICk7CiAgICAgICAgICBpZiAoZGlmZmljdWx0eSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIHRoaXMuZGlmZmljdWx0eUxpc3QucHVzaCh7CiAgICAgICAgICAgICAgZGlmZmljdWx0eTogaXNzdWUuZGlmZmljdWx0eSwKICAgICAgICAgICAgICBpc3N1ZXM6IFtpc3N1ZV0sCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSAKICAgICAgICAgIGVsc2UgewogICAgICAgICAgICBkaWZmaWN1bHR5Lmlzc3Vlcy5wdXNoKGlzc3VlKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgbGV0IG1heERpZmZpY3VsdHkgPTA7CiAgICAgIHRoaXMuZGlmZmljdWx0eUxpc3QuZm9yRWFjaChkaWZmID0+IHsKICAgICAgICBpZihkaWZmLmRpZmZpY3VsdHkgPiBtYXhEaWZmaWN1bHR5KSBtYXhEaWZmaWN1bHR5PWRpZmYuZGlmZmljdWx0eTsKICAgICAgICB9KTsKICAgICAgCiAgICAgIGZvcihsZXQgbiA9IDE7IGZpYm9uYWNjaShuKTxtYXhEaWZmaWN1bHR5OyBuKyspewogICAgICAgIGlmKHRoaXMuZGlmZmljdWx0eUxpc3QuZmluZChlbG09PmVsbS5kaWZmaWN1bHR5ID09PSBmaWJvbmFjY2kobikpID09PSB1bmRlZmluZWQpewogICAgICAgICAgdGhpcy5kaWZmaWN1bHR5TGlzdC5wdXNoKHtkaWZmaWN1bHR5OmZpYm9uYWNjaShuKSwgaXNzdWVzOltdfSk7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmRpZmZpY3VsdHlMaXN0LnNvcnQoKGEsYik9PnsKICAgICAgICByZXR1cm4gYS5kaWZmaWN1bHR5IC0gYi5kaWZmaWN1bHR5OwogICAgICB9KTsKICAgIH0sCiAgICBjYW5jZWxDaGFuZ2VzOiBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMuYXhpb3MuZ2V0KHRoaXMuJHByb3h5ICsgIi9pc3N1ZXMiKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIHRoaXMudW5hc3NpZ25lZElzc3VlcyA9IFtdOwogICAgICAgIHRoaXMuZGlmZmljdWx0eUxpc3QgPSBbXTsKICAgICAgICBsZXQgaXNzdWVzID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICB0aGlzLnNvcnRJc3N1ZXMoaXNzdWVzKTsKICAgICAgfSk7CiAgICB9LAogIH0sCn07CgpmdW5jdGlvbiBmaWJvbmFjY2kobnVtKSB7CiAgdmFyIG51bTEgPSAwOwogIHZhciBudW0yID0gMTsKICB2YXIgc3VtOwogIHZhciBpID0gMDsKICBmb3IgKGkgPSAwOyBpIDwgbnVtOyBpKyspIHsKICAgIHN1bSA9IG51bTEgKyBudW0yOwogICAgbnVtMSA9IG51bTI7CiAgICBudW0yID0gc3VtOwogIH0KICByZXR1cm4gbnVtMjsKfQo="},{"version":3,"sources":["DifficultyManagement.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DifficultyManagement.vue","sourceRoot":"src/components/issues","sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"row\">\n      <div class=\"col-3\">\n        <h3 align=\"center\">Non assignés</h3>\n        <draggable\n          v-model=\"unassignedIssues\"\n          group=\"people\"\n          @start=\"drag = true\"\n          @end=\"drag = false\"\n        >\n          <div v-for=\"issue in unassignedIssues\" :key=\"issue.id\">\n            <issueSummary :title=\"issue.title\" :difficulty=\"0\" />\n          </div>\n        </draggable>\n      </div>\n\n      <div\n        class=\"col-3\"\n        v-for=\"difficulty in difficultyList\"\n        :key=\"difficulty.id\"\n      >\n        <h3 align=\"center\">Difficuté: {{ difficulty.difficulty }}</h3>\n        <div>\n          <draggable\n            v-model=\"difficulty.issues\"\n            group=\"people\"\n            @start=\"drag = true\"\n            @end=\"drag = false\"\n          >\n            <div v-for=\"issue in difficulty.issues\" :key=\"issue.id\">\n              <issueSummary\n                :title=\"issue.title\"\n                :difficulty=\"difficulty.difficulty\"\n              />\n            </div>\n          </draggable>\n        </div>\n      </div>\n      <div class=\"col-3\">\n        <button @click=\"addDifficulty\" class=\"btn btn-primary\">\n          Ajouter une difficulté\n        </button>\n      </div>\n    </div>\n    <div class=\"row justify-content-end\">\n      <div class=\"col\" align=\"right\">\n        <button class=\"btn btn-primary\" @click=\"applyChanges\">Appliquer</button>\n        <button class=\"btn btn-primary\" @click=\"cancelChanges\">Annuler</button>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport draggable from \"vuedraggable\";\nimport issueSummary from \"./subComponents/IssueSummary\";\n\nexport default {\n  name: \"DifficultyManagement\",\n  order: 1,\n  components: {\n    draggable,\n    issueSummary,\n  },\n  data() {\n    return {\n      unassignedIssues: [],\n      difficultyList: [\n        {\n          difficulty: 1,\n          issues: [],\n        },\n      ],\n    };\n  },\n  created() {\n    this.axios.get(this.$proxy + \"/issues\").then((response) => {\n      let issues = response.data;\n      this.sortIssues(issues);\n    });\n  },\n  methods: {\n    log: function (evt) {\n      window.console.log(evt);\n    },\n    addDifficulty: function () {\n      this.difficultyList.push({\n        difficulty: fibonacci(this.difficultyList.length + 1),\n        issues: [],\n      });\n    },\n    applyChanges: function () {\n      //Envoyer au serveur  d'issues  la liste.\n      this.axios\n        .put(this.$proxy + \"/issues/manageDifficulty\", {\n          difficultyList: this.difficultyList,\n        })\n        .then(() => {});\n    },\n    sortIssues: function (issues) {\n      for (let issue of issues) {\n        //window.console.log(issue);\n        if (\n          issue.difficulty == undefined ||\n          issue.difficulty == null ||\n          issue.difficulty == 0\n        ) {\n          this.unassignedIssues.push(issue);\n        } \n        else {\n          let difficulty = this.difficultyList.find(\n            (element) => element.difficulty === issue.difficulty\n          );\n          if (difficulty === undefined) {\n            this.difficultyList.push({\n              difficulty: issue.difficulty,\n              issues: [issue],\n            });\n          } \n          else {\n            difficulty.issues.push(issue);\n          }\n        }\n      }\n      let maxDifficulty =0;\n      this.difficultyList.forEach(diff => {\n        if(diff.difficulty > maxDifficulty) maxDifficulty=diff.difficulty;\n        });\n      \n      for(let n = 1; fibonacci(n)<maxDifficulty; n++){\n        if(this.difficultyList.find(elm=>elm.difficulty === fibonacci(n)) === undefined){\n          this.difficultyList.push({difficulty:fibonacci(n), issues:[]});\n        }\n      }\n\n      this.difficultyList.sort((a,b)=>{\n        return a.difficulty - b.difficulty;\n      });\n    },\n    cancelChanges: function () {\n      this.axios.get(this.$proxy + \"/issues\").then((response) => {\n        this.unassignedIssues = [];\n        this.difficultyList = [];\n        let issues = response.data;\n        this.sortIssues(issues);\n      });\n    },\n  },\n};\n\nfunction fibonacci(num) {\n  var num1 = 0;\n  var num2 = 1;\n  var sum;\n  var i = 0;\n  for (i = 0; i < num; i++) {\n    sum = num1 + num2;\n    num1 = num2;\n    num2 = sum;\n  }\n  return num2;\n}\n</script>"]}]}